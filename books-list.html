<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Danh sách sách - BookStore Admin</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon">
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
    <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/book-list.css" rel="stylesheet">

    <style>
        /* Upload Area Styles for Edit Modal */
        .upload-area {
            border: 2px dashed #ccc;
            border-radius: 5px;
            padding: 2rem;
            text-align: center;
            background-color: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-area:hover,
        .upload-area.active {
            background-color: #f0f3ff;
            border-color: #4154f1;
        }

        .upload-area i {
            color: #4154f1;
            margin-bottom: 0.5rem;
        }

        .upload-area p {
            margin-bottom: 0.25rem;
        }

        /* Image Preview Styles */
        .image-preview {
            margin-top: 1rem;
            overflow: hidden;
        }

        .multiple-image-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .preview-item {
            position: relative;
            width: 120px;
            height: 120px;
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid #ebeef4;
            margin-bottom: 10px;
        }

        .preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.8);
            color: #dc3545;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        .remove-btn:hover {
            background-color: rgba(255, 255, 255, 1);
            color: #b02a37;
        }

        /* New Modern Image Grid Styles */
        .image-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        /* Different grid for additional images section */
        .additional-images .image-grid {
            grid-template-columns: repeat(5, 1fr);
        }

        .image-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #ebeef4;
            aspect-ratio: 1;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .image-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modern-upload-area {
            border: 2px dashed #ccc;
            border-radius: 8px;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background-color: #f8f9fa;
            aspect-ratio: 1;
            transition: all 0.3s ease;
        }

        .modern-upload-area:hover {
            background-color: #f0f3ff;
            border-color: #4154f1;
        }

        .modern-upload-area i {
            font-size: 2rem;
            color: #4154f1;
            margin-bottom: 10px;
        }

        .modern-upload-area p {
            color: #6c757d;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .badge-overlay {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(40, 167, 69, 0.8);
            color: white;
            padding: 2px 8px;
            border-radius: 30px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* Section title styling */
        .section-title {
            color: #012970;
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            border-left: 3px solid #4154f1;
            padding-left: 10px;
        }

        /* Tab content padding */
        #edit-book-images {
            padding: 1.5rem;
        }

        /* Media queries for responsiveness */
        @media (max-width: 992px) {
            .image-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .additional-images .image-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .image-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .additional-images .image-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Tab Navigation Styles */
        .nav-tabs-bordered .nav-link {
            font-weight: 500;
            padding: 0.75rem 1.25rem;
        }

        .tab-content {
            padding-top: 1.5rem;
        }

        /* Editor Styles */
        .ql-container {
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>

<body>
    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>

    <!-- Sidebar Placeholder -->
    <div id="sidebar-placeholder"></div>

    <!-- Main Content -->
    <main id="main" class="main">
        <div class="pagetitle">
            <h1>Danh sách sách</h1>
            <nav>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Trang chủ</a></li>
                    <li class="breadcrumb-item">Quản lý sách</li>
                    <li class="breadcrumb-item active">Danh sách sách</li>
                </ol>
            </nav>
        </div>

        <section class="section">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body pt-3">
                            <h5 class="card-title">Danh sách sách</h5>

                            <!-- Toolbar -->
                            <div class="d-flex justify-content-between mb-4">
                                <div>
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                        data-bs-target="#addBookModal">
                                        <i class="bi bi-plus-lg"></i> Thêm sách mới
                                    </button>
                                    <button type="button" class="btn btn-success ms-2">
                                        <i class="bi bi-file-earmark-excel"></i> Xuất Excel
                                    </button>
                                    <button type="button" class="btn btn-secondary ms-2">
                                        <i class="bi bi-printer"></i> In
                                    </button>
                                </div>
                                <div class="d-flex align-items-center">
                                    <select class="form-select me-2" style="width: auto;">
                                        <option value="">-- Danh mục --</option>
                                        <option value="1">Văn học</option>
                                        <option value="2">Kinh tế</option>
                                        <option value="3">Tâm lý - Kỹ năng sống</option>
                                        <option value="4">Nuôi dạy con</option>
                                        <option value="5">Sách thiếu nhi</option>
                                        <option value="6">Tiểu sử - Hồi ký</option>
                                    </select>
                                    <select class="form-select me-2" style="width: auto;">
                                        <option value="">-- Trạng thái --</option>
                                        <option value="1">Còn hàng</option>
                                        <option value="2">Hết hàng</option>
                                        <option value="3">Sắp hết</option>
                                        <option value="4">Ngừng kinh doanh</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Table with stripped rows -->
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th scope="col" width="50">#</th>
                                            <th scope="col" width="80">Hình ảnh</th>
                                            <th scope="col">Tên sách</th>
                                            <th scope="col">Tác giả</th>
                                            <th scope="col">Danh mục</th>
                                            <th scope="col">Giá</th>
                                            <th scope="col">Số lượng</th>
                                            <th scope="col">Trạng thái</th>
                                            <th scope="col" class="text-center">Thao tác</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="clickable-row" data-href="product-detail.html">
                                            <td>1</td>
                                            <td><img src="https://cdn1.fahasa.com/media/catalog/product/i/m/image_195509_1_36793.jpg"
                                                    height="60" style="object-fit: contain;"></td>
                                            <td><span class="product-name"><strong>Nhà giả kim</strong></span></td>
                                            <td>Paulo Coelho</td>
                                            <td>Văn học</td>
                                            <td>120.000₫</td>
                                            <td>100</td>
                                            <td><span class="badge bg-success">Còn hàng</span></td>
                                            <td class="text-center">
                                                <button class="btn btn-sm btn-primary btn-edit" title="Chỉnh sửa"
                                                    onclick="event.stopPropagation()"><i
                                                        class="bi bi-pencil-square"></i></button>
                                                <button class="btn btn-sm btn-danger" title="Xóa"
                                                    onclick="event.stopPropagation()"><i
                                                        class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                        <tr class="clickable-row" data-href="product-detail.html">
                                            <td>2</td>
                                            <td><img src="https://cdn1.fahasa.com/media/catalog/product/8/9/8934974182375.jpg"
                                                    height="60" style="object-fit: contain;"></td>
                                            <td><span class="product-name"><strong>Người đàn ông mang tên
                                                        Ove</strong></span></td>
                                            <td>Fredrik Backman</td>
                                            <td>Văn học</td>
                                            <td>145.000₫</td>
                                            <td>50</td>
                                            <td><span class="badge bg-success">Còn hàng</span></td>
                                            <td class="text-center">
                                                <button class="btn btn-sm btn-primary btn-edit" title="Chỉnh sửa"
                                                    onclick="event.stopPropagation()"><i
                                                        class="bi bi-pencil-square"></i></button>
                                                <button class="btn btn-sm btn-danger" title="Xóa"
                                                    onclick="event.stopPropagation()"><i
                                                        class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                        <tr class="clickable-row" data-href="product-detail.html">
                                            <td>3</td>
                                            <td><img src="https://cdn1.fahasa.com/media/catalog/product/8/9/8932000134749_1.jpg"
                                                    height="60" style="object-fit: contain;"></td>
                                            <td><span class="product-name"><strong>Trường ca Achilles</strong></span>
                                            </td>
                                            <td>Madeline Miller</td>
                                            <td>Văn học</td>
                                            <td>190.000₫</td>
                                            <td>0</td>
                                            <td><span class="badge bg-danger">Hết hàng</span></td>
                                            <td class="text-center">
                                                <button class="btn btn-sm btn-primary btn-edit" title="Chỉnh sửa"
                                                    onclick="event.stopPropagation()"><i
                                                        class="bi bi-pencil-square"></i></button>
                                                <button class="btn btn-sm btn-danger" title="Xóa"
                                                    onclick="event.stopPropagation()"><i
                                                        class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                        <tr class="clickable-row" data-href="product-detail.html">
                                            <td>4</td>
                                            <td><img src="https://cdn1.fahasa.com/media/catalog/product/8/9/8935235238978.jpg"
                                                    height="60" style="object-fit: contain;"></td>
                                            <td><span class="product-name"><strong>MBA Bằng Hình</strong></span></td>
                                            <td>Jason Barron</td>
                                            <td>Kinh tế</td>
                                            <td>215.000₫</td>
                                            <td>20</td>
                                            <td><span class="badge bg-warning text-dark">Sắp hết</span></td>
                                            <td class="text-center">
                                                <button class="btn btn-sm btn-primary btn-edit" title="Chỉnh sửa"
                                                    onclick="event.stopPropagation()"><i
                                                        class="bi bi-pencil-square"></i></button>
                                                <button class="btn btn-sm btn-danger" title="Xóa"
                                                    onclick="event.stopPropagation()"><i
                                                        class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                        <tr class="clickable-row" data-href="product-detail.html">
                                            <td>5</td>
                                            <td><img src="https://cdn1.fahasa.com/media/catalog/product/i/m/image_217480.jpg"
                                                    height="60" style="object-fit: contain;"></td>
                                            <td><span class="product-name"><strong>Cây cam ngọt của tôi</strong></span>
                                            </td>
                                            <td>José Mauro de Vasconcelos</td>
                                            <td>Văn học</td>
                                            <td>108.000₫</td>
                                            <td>150</td>
                                            <td><span class="badge bg-success">Còn hàng</span></td>
                                            <td class="text-center">
                                                <button class="btn btn-sm btn-primary btn-edit" title="Chỉnh sửa"
                                                    onclick="event.stopPropagation()"><i
                                                        class="bi bi-pencil-square"></i></button>
                                                <button class="btn btn-sm btn-danger" title="Xóa"
                                                    onclick="event.stopPropagation()"><i
                                                        class="bi bi-trash"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Pagination -->
                            <div class="d-flex justify-content-between align-items-center mt-4">
                                <div class="text-muted">Hiển thị 1 đến 5 của 24 mục</div>
                                <nav aria-label="Page navigation">
                                    <ul class="pagination">
                                        <li class="page-item disabled">
                                            <a class="page-link" href="#" aria-label="Previous">
                                                <span aria-hidden="true">&laquo;</span>
                                            </a>
                                        </li>
                                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                                        <li class="page-item">
                                            <a class="page-link" href="#" aria-label="Next">
                                                <span aria-hidden="true">&raquo;</span>
                                            </a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Modal Add Book -->
        <div class="modal fade" id="addBookModal" tabindex="-1" aria-labelledby="addBookModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addBookModalLabel">Thêm sách mới</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form class="row g-3 needs-validation" novalidate>
                            <div class="col-md-6">
                                <label for="bookTitle" class="form-label">Tên sách <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="bookTitle" required>
                                <div class="invalid-feedback">Vui lòng nhập tên sách!</div>
                            </div>
                            <div class="col-md-6">
                                <label for="author" class="form-label">Tác giả <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="author" required>
                                <div class="invalid-feedback">Vui lòng nhập tên tác giả!</div>
                            </div>
                            <div class="col-md-4">
                                <label for="category" class="form-label">Danh mục <span
                                        class="text-danger">*</span></label>
                                <select id="category" class="form-select" required>
                                    <option selected disabled value="">-- Chọn danh mục --</option>
                                    <option>Văn học</option>
                                    <option>Kinh tế</option>
                                    <option>Tâm lý - Kỹ năng sống</option>
                                    <option>Nuôi dạy con</option>
                                    <option>Sách thiếu nhi</option>
                                    <option>Tiểu sử - Hồi ký</option>
                                </select>
                                <div class="invalid-feedback">Vui lòng chọn danh mục!</div>
                            </div>
                            <div class="col-md-4">
                                <label for="price" class="form-label">Giá <span class="text-danger">*</span></label>
                                <div class="input-group">
                                    <input type="number" class="form-control" id="price" required>
                                    <span class="input-group-text">VNĐ</span>
                                </div>
                                <div class="invalid-feedback">Vui lòng nhập giá!</div>
                            </div>
                            <div class="col-md-4">
                                <label for="quantity" class="form-label">Số lượng <span
                                        class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="quantity" required>
                                <div class="invalid-feedback">Vui lòng nhập số lượng!</div>
                            </div>
                            <div class="col-md-12">
                                <label for="description" class="form-label">Mô tả</label>
                                <textarea class="form-control" id="description" rows="3"></textarea>
                            </div>
                            <div class="col-md-12">
                                <label for="bookCover" class="form-label">Hình ảnh</label>
                                <input class="form-control" type="file" id="bookCover">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                        <button type="button" class="btn btn-primary">Lưu</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Edit Book -->
        <div class="modal fade" id="editBookModal" tabindex="-1" aria-labelledby="editBookModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editBookModalLabel">Chỉnh sửa thông tin sách</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <!-- Tabs -->
                        <ul class="nav nav-tabs nav-tabs-bordered" id="editBookTabs">
                            <li class="nav-item">
                                <button class="nav-link active" data-bs-toggle="tab"
                                    data-bs-target="#edit-book-info">Thông tin sách</button>
                            </li>
                            <li class="nav-item">
                                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#edit-book-description">Mô
                                    tả</button>
                            </li>
                            <li class="nav-item">
                                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#edit-book-images">Hình
                                    ảnh</button>
                            </li>
                        </ul>

                        <form class="needs-validation" novalidate>
                            <div class="tab-content pt-4">
                                <!-- Book Info Tab -->
                                <div class="tab-pane fade show active" id="edit-book-info">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label for="editBookTitle" class="form-label">Tên sách <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="editBookTitle" required>
                                            <div class="invalid-feedback">Vui lòng nhập tên sách!</div>
                                        </div>

                                        <div class="col-md-6">
                                            <label for="editAuthor" class="form-label">Tác giả <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="editAuthor" required>
                                            <div class="invalid-feedback">Vui lòng nhập tên tác giả!</div>
                                        </div>

                                        <div class="col-md-6">
                                            <label for="editSupplier" class="form-label">Nhà cung cấp <span
                                                    class="text-danger">*</span></label>
                                            <select class="form-select" id="editSupplier" required>
                                                <option selected disabled value="">-- Chọn nhà cung cấp --</option>
                                                <option value="1">Nhà xuất bản Kim Đồng</option>
                                                <option value="2">Nhà xuất bản Trẻ</option>
                                                <option value="3">Nhà xuất bản Giáo Dục</option>
                                                <option value="4">Alpha Books</option>
                                                <option value="5">Nhã Nam</option>
                                                <option value="6">Fahasa</option>
                                            </select>
                                            <div class="invalid-feedback">Vui lòng chọn nhà cung cấp!</div>
                                        </div>

                                        <div class="col-md-6">
                                            <label for="editPublisher" class="form-label">Nhà xuất bản</label>
                                            <select class="form-select" id="editPublisher">
                                                <option selected disabled value="">-- Chọn nhà xuất bản --</option>
                                                <option value="1">Nhà xuất bản Kim Đồng</option>
                                                <option value="2">Nhà xuất bản Trẻ</option>
                                                <option value="3">Nhà xuất bản Giáo Dục</option>
                                                <option value="4">Nhà xuất bản Văn học</option>
                                                <option value="5">Nhà xuất bản Hội Nhà văn</option>
                                                <option value="6">Nhà xuất bản Lao Động</option>
                                            </select>
                                        </div>

                                        <div class="col-md-4">
                                            <label for="editCoverType" class="form-label">Hình thức bìa</label>
                                            <select class="form-select" id="editCoverType">
                                                <option selected disabled value="">-- Chọn hình thức bìa --</option>
                                                <option value="1">Bìa cứng</option>
                                                <option value="2">Bìa mềm</option>
                                                <option value="3">Bìa gập</option>
                                            </select>
                                        </div>

                                        <div class="col-md-4">
                                            <label for="editPrice" class="form-label">Giá bán <span
                                                    class="text-danger">*</span></label>
                                            <div class="input-group">
                                                <input type="number" class="form-control" id="editPrice" required>
                                                <span class="input-group-text">VNĐ</span>
                                            </div>
                                            <div class="invalid-feedback">Vui lòng nhập giá bán!</div>
                                        </div>

                                        <div class="col-md-4">
                                            <label for="editPublishYear" class="form-label">Năm xuất bản</label>
                                            <input type="number" class="form-control" id="editPublishYear" min="1900"
                                                max="2099" placeholder="VD: 2023">
                                        </div>

                                        <div class="col-md-4">
                                            <label for="editLanguage" class="form-label">Ngôn ngữ</label>
                                            <select class="form-select" id="editLanguage">
                                                <option selected value="1">Tiếng Việt</option>
                                                <option value="2">Tiếng Anh</option>
                                                <option value="3">Song ngữ Việt - Anh</option>
                                                <option value="4">Tiếng Pháp</option>
                                                <option value="5">Tiếng Nhật</option>
                                                <option value="6">Tiếng Hàn</option>
                                                <option value="7">Tiếng Trung</option>
                                            </select>
                                        </div>

                                        <div class="col-md-4">
                                            <label for="editWeight" class="form-label">Trọng lượng (gram)</label>
                                            <input type="number" class="form-control" id="editWeight"
                                                placeholder="VD: 350">
                                        </div>

                                        <div class="col-md-4">
                                            <label for="editSize" class="form-label">Kích thước</label>
                                            <input type="text" class="form-control" id="editSize"
                                                placeholder="VD: 14 x 20.5 cm">
                                        </div>

                                        <div class="col-md-4">
                                            <label for="editPageCount" class="form-label">Số trang</label>
                                            <input type="number" class="form-control" id="editPageCount"
                                                placeholder="VD: 256">
                                        </div>

                                        <div class="col-md-4">
                                            <label for="editInventory" class="form-label">Số lượng <span
                                                    class="text-danger">*</span></label>
                                            <input type="number" class="form-control" id="editInventory" required
                                                placeholder="VD: 100">
                                            <div class="invalid-feedback">Vui lòng nhập số lượng tồn kho!</div>
                                        </div>

                                        <div class="col-md-4">
                                            <label for="editCategory" class="form-label">Danh mục <span
                                                    class="text-danger">*</span></label>
                                            <select class="form-select" id="editCategory" required>
                                                <option selected disabled value="">-- Chọn danh mục --</option>
                                                <option value="1">Văn học</option>
                                                <option value="2">Kinh tế</option>
                                                <option value="3">Tâm lý - Kỹ năng sống</option>
                                                <option value="4">Nuôi dạy con</option>
                                                <option value="5">Sách thiếu nhi</option>
                                                <option value="6">Tiểu sử - Hồi ký</option>
                                            </select>
                                            <div class="invalid-feedback">Vui lòng chọn danh mục!</div>
                                        </div>
                                    </div>
                                    <div class="text-end mt-4">
                                        <button type="button" class="btn btn-primary next-tab">Tiếp theo</button>
                                    </div>
                                </div>

                                <!-- Book Description Tab -->
                                <div class="tab-pane fade" id="edit-book-description">
                                    <div class="mb-3">
                                        <label for="editShortDescription" class="form-label">Mô tả ngắn</label>
                                        <textarea class="form-control" id="editShortDescription" rows="3"
                                            placeholder="Nhập mô tả ngắn về sách (tối đa 200 từ)"></textarea>
                                    </div>
                                    <div class="mb-3">
                                        <label for="editFullDescription" class="form-label">Mô tả chi tiết <span
                                                class="text-danger">*</span></label>
                                        <div id="editEditor" style="height: 300px;"></div>
                                        <input type="hidden" id="editFullDescription" required>
                                        <div class="invalid-feedback">Vui lòng nhập mô tả chi tiết về sách!</div>
                                    </div>
                                    <div class="d-flex justify-content-between mt-4">
                                        <button type="button" class="btn btn-secondary prev-tab">Quay lại</button>
                                        <button type="button" class="btn btn-primary next-tab">Tiếp theo</button>
                                    </div>
                                </div>

                                <!-- Book Images Tab -->
                                <div class="tab-pane fade" id="edit-book-images">
                                    <h5 class="mb-4">Tải lên hình ảnh sách</h5>

                                    <div class="row mb-4">
                                        <div class="col-md-6">
                                            <div class="section-title">Ảnh bìa sách <span class="text-danger">*</span>
                                            </div>
                                            <p class="text-muted small mb-2">Hình ảnh chính hiển thị trên trang danh
                                                sách sản phẩm</p>
                                            <div class="image-grid">
                                                <div class="image-item" id="coverImageContainer">
                                                    <!-- Will be filled by JavaScript -->
                                                </div>
                                                <div class="image-item" id="coverUploadContainer">
                                                    <div class="modern-upload-area" id="editCoverImageUpload">
                                                        <i class="bi bi-cloud-arrow-up"></i>
                                                        <p>Thả ảnh vào đây hoặc</p>
                                                        <p><span class="text-primary">click để chọn</span></p>
                                                        <input type="file" id="editCoverImage" class="file-input"
                                                            accept="image/*" hidden>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="editCoverPreview" class="image-preview d-none"></div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="section-title">Ảnh bìa sau</div>
                                            <p class="text-muted small mb-2">Hình ảnh mặt sau của sách</p>
                                            <div class="image-grid">
                                                <div class="image-item" id="backCoverImageContainer">
                                                    <!-- Will be filled by JavaScript -->
                                                </div>
                                                <div class="image-item" id="backCoverUploadContainer">
                                                    <div class="modern-upload-area" id="editBackCoverImageUpload">
                                                        <i class="bi bi-cloud-arrow-up"></i>
                                                        <p>Thả ảnh vào đây hoặc</p>
                                                        <p><span class="text-primary">click để chọn</span></p>
                                                        <input type="file" id="editBackCoverImage" class="file-input"
                                                            accept="image/*" hidden>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="editBackCoverPreview" class="image-preview d-none"></div>
                                        </div>
                                    </div>

                                    <div class="additional-images mb-4">
                                        <div class="section-title">Ảnh bổ sung (tối đa 5 ảnh)</div>
                                        <p class="text-muted small mb-2">Hình ảnh chi tiết khác như nội dung sách, hình
                                            ảnh minh họa...</p>
                                        <div class="image-grid">
                                            <!-- Additional image containers will be added by JavaScript -->
                                            <div class="image-item">
                                                <div class="modern-upload-area" id="editAdditionalImagesUpload">
                                                    <i class="bi bi-images"></i>
                                                    <p>Thả ảnh vào đây hoặc</p>
                                                    <p><span class="text-primary">click để chọn</span></p>
                                                    <input type="file" id="editAdditionalImages" class="file-input"
                                                        accept="image/*" multiple hidden>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="editAdditionalPreview" class="d-none"></div>
                                    </div>

                                    <div class="alert alert-info mt-4">
                                        <i class="bi bi-info-circle me-2"></i>
                                        Định dạng ảnh hỗ trợ: JPG, PNG hoặc WEBP. Kích thước tối đa: 2MB/ảnh.
                                    </div>

                                    <div class="d-flex justify-content-between mt-4">
                                        <button type="button" class="btn btn-secondary prev-tab">Quay lại</button>
                                        <div>
                                            <button type="button" class="btn btn-secondary me-2"
                                                data-bs-dismiss="modal">Hủy</button>
                                            <button type="submit" class="btn btn-success">Lưu thay đổi</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="assets/vendor/quill/quill.js"></script>
    <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
    <script src="assets/vendor/tinymce/tinymce.min.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>
    <script src="js/template.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {


            // Form validation
            const forms = document.querySelectorAll('.needs-validation');
            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });

            // Add click event for table rows
            document.querySelectorAll('.clickable-row').forEach(row => {
                row.style.cursor = 'pointer';
                row.addEventListener('click', function () {
                    window.location.href = this.dataset.href;
                });
            });

            // Initialize Quill editor for edit modal
            var quillEdit = new Quill('#editEditor', {
                theme: 'snow',
                placeholder: 'Nhập mô tả chi tiết về sách...',
                modules: {
                    toolbar: [
                        ['bold', 'italic', 'underline', 'strike'],
                        ['blockquote', 'code-block'],
                        [{ 'header': 1 }, { 'header': 2 }],
                        [{ 'list': 'ordered' }, { 'list': 'bullet' }],
                        [{ 'indent': '-1' }, { 'indent': '+1' }],
                        [{ 'size': ['small', false, 'large', 'huge'] }],
                        [{ 'color': [] }, { 'background': [] }],
                        [{ 'align': [] }],
                        ['clean']
                    ]
                }
            });

            // Set sample content for the editor
            quillEdit.root.innerHTML = `
            `;

            // Save Quill content to hidden input when form submits
            document.querySelector('#editBookModal form').addEventListener('submit', function () {
                document.getElementById('editFullDescription').value = quillEdit.root.innerHTML;
            });

            // Tab navigation for edit modal
            $(document).on('click', '#editBookModal .next-tab', function () {
                const currentPane = $(this).closest('.tab-pane');
                const nextPane = currentPane.next('.tab-pane');
                if (nextPane.length) {
                    const nextId = nextPane.attr('id');
                    $(`#editBookTabs button[data-bs-target="#${nextId}"]`).tab('show');
                }
            });

            $(document).on('click', '#editBookModal .prev-tab', function () {
                const currentPane = $(this).closest('.tab-pane');
                const prevPane = currentPane.prev('.tab-pane');
                if (prevPane.length) {
                    const prevId = prevPane.attr('id');
                    $(`#editBookTabs button[data-bs-target="#${prevId}"]`).tab('show');
                }
            });

            // Open edit modal when edit button is clicked
            document.querySelectorAll('.btn-edit').forEach(btn => {
                btn.addEventListener('click', function (e) {
                    e.preventDefault();
                    e.stopPropagation();

                    // Get book data from the row
                    const row = this.closest('tr');
                    const bookTitle = row.querySelector('.product-name strong').innerText;
                    const author = row.querySelector('td:nth-child(4)').innerText;
                    const category = row.querySelector('td:nth-child(5)').innerText;
                    const price = row.querySelector('td:nth-child(6)').innerText.replace('₫', '').trim();
                    const quantity = row.querySelector('td:nth-child(7)').innerText;
                    const imageSrc = row.querySelector('img').src;

                    // Set values in the form
                    document.getElementById('editBookTitle').value = bookTitle;
                    document.getElementById('editAuthor').value = author;
                    document.getElementById('editPrice').value = price.replace(/\./g, '');
                    document.getElementById('editInventory').value = quantity;

                    // Find and set the category option
                    const categorySelect = document.getElementById('editCategory');
                    for (let i = 0; i < categorySelect.options.length; i++) {
                        if (categorySelect.options[i].text === category) {
                            categorySelect.selectedIndex = i;
                            break;
                        }
                    }

                    // For demo purposes, let's load different images for back cover and additional images
                    // These image URLs are from product-detail.html
                    const demoImages = [
                        "https://cdn1.fahasa.com/media/catalog/product/i/m/image_195509_1_36793.jpg",
                        "https://cdn1.fahasa.com/media/catalog/product/8/9/8934974182375.jpg",
                        "https://cdn1.fahasa.com/media/catalog/product/8/9/8932000134749_1.jpg",
                        "https://cdn1.fahasa.com/media/catalog/product/8/9/8935235238978.jpg",
                        "https://cdn1.fahasa.com/media/catalog/product/i/m/image_217480.jpg"
                    ];

                    // Filter out the main cover image
                    const otherImages = demoImages.filter(img => img !== imageSrc);

                    // Set main cover image and hide upload area
                    const coverImageContainer = document.getElementById('coverImageContainer');
                    const coverUploadContainer = document.getElementById('coverUploadContainer');

                    if (imageSrc) {
                        coverImageContainer.innerHTML = `
                            <img src="${imageSrc}" alt="Cover Image">
                            <button type="button" class="remove-btn"><i class="bi bi-x"></i></button>
                            <div class="badge-overlay">Cover</div>
                        `;

                        coverUploadContainer.style.display = 'none';

                        coverImageContainer.querySelector('.remove-btn').addEventListener('click', () => {
                            coverImageContainer.innerHTML = '';
                            coverUploadContainer.style.display = 'block';
                        });
                    } else {
                        coverImageContainer.innerHTML = '';
                        coverUploadContainer.style.display = 'block';
                    }

                    // Set back cover image (if available) and hide upload area
                    const backCoverImageContainer = document.getElementById('backCoverImageContainer');
                    const backCoverUploadContainer = document.getElementById('backCoverUploadContainer');

                    if (otherImages.length > 0) {
                        backCoverImageContainer.innerHTML = `
                            <img src="${otherImages[0]}" alt="Back Cover">
                            <button type="button" class="remove-btn"><i class="bi bi-x"></i></button>
                            <div class="badge-overlay">Back</div>
                        `;

                        backCoverUploadContainer.style.display = 'none';

                        backCoverImageContainer.querySelector('.remove-btn').addEventListener('click', () => {
                            backCoverImageContainer.innerHTML = '';
                            backCoverUploadContainer.style.display = 'block';
                        });
                    } else {
                        backCoverImageContainer.innerHTML = '';
                        backCoverUploadContainer.style.display = 'block';
                    }

                    // Set additional images (if available)
                    const additionalImages = otherImages.slice(1, 6);
                    const additionalImagesGrid = document.querySelector('.additional-images .image-grid');

                    // Clear existing additional images except the upload button
                    const uploadButton = additionalImagesGrid.lastElementChild;
                    additionalImagesGrid.innerHTML = '';
                    additionalImagesGrid.appendChild(uploadButton);

                    // Add additional images
                    additionalImages.forEach((imgSrc, index) => {
                        const additionalImageItem = document.createElement('div');
                        additionalImageItem.className = 'image-item';
                        additionalImageItem.innerHTML = `
                            <img src="${imgSrc}" alt="Additional Image ${index + 1}">
                            <button type="button" class="remove-btn"><i class="bi bi-x"></i></button>
                            <div class="badge-overlay">x${index + 1}</div>
                        `;

                        additionalImageItem.querySelector('.remove-btn').addEventListener('click', () => {
                            additionalImageItem.remove();
                            // Update numbering of remaining images
                            updateBadgeNumbers(additionalImagesGrid);
                        });

                        // Insert before the upload button
                        additionalImagesGrid.insertBefore(additionalImageItem, uploadButton);
                    });

                    // Show the modal
                    const editModal = new bootstrap.Modal(document.getElementById('editBookModal'));
                    editModal.show();
                });
            });

            // Function to handle file upload for modern-upload-area
            const setupModernImageUpload = (uploadAreaId, inputId, containerSelector, uploadContainerSelector, multiple = false) => {
                const uploadArea = document.getElementById(uploadAreaId);
                const input = document.getElementById(inputId);

                if (!uploadArea || !input) return;

                uploadArea.addEventListener('click', () => input.click());

                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('active');
                });

                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.classList.remove('active');
                });

                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('active');

                    if (multiple) {
                        handleModernMultipleFiles(Array.from(e.dataTransfer.files), containerSelector);
                    } else {
                        handleModernSingleFile(e.dataTransfer.files[0], containerSelector, uploadContainerSelector);
                    }
                });

                input.addEventListener('change', () => {
                    if (multiple) {
                        handleModernMultipleFiles(Array.from(input.files), containerSelector);
                    } else {
                        handleModernSingleFile(input.files[0], containerSelector, uploadContainerSelector);
                    }
                });
            };

            const handleModernSingleFile = (file, containerSelector, uploadContainerSelector) => {
                if (!file || !file.type.startsWith('image/')) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    const container = document.querySelector(containerSelector);
                    const uploadContainer = document.querySelector(uploadContainerSelector);

                    if (!container || !uploadContainer) return;

                    // Add the badge text based on container ID
                    let badgeText = "Image";
                    if (containerSelector.includes("cover")) {
                        badgeText = "Cover";
                    } else if (containerSelector.includes("back")) {
                        badgeText = "Back";
                    }

                    container.innerHTML = `
                        <img src="${e.target.result}" alt="Preview">
                        <button type="button" class="remove-btn"><i class="bi bi-x"></i></button>
                        <div class="badge-overlay">${badgeText}</div>
                    `;

                    // Hide the upload container when an image is present
                    uploadContainer.style.display = 'none';

                    container.querySelector('.remove-btn').addEventListener('click', () => {
                        container.innerHTML = '';
                        // Show the upload container when the image is removed
                        uploadContainer.style.display = 'block';
                    });
                };
                reader.readAsDataURL(file);
            };

            const handleModernMultipleFiles = (files, containerSelector) => {
                if (!files.length) return;

                const grid = document.querySelector(containerSelector);
                if (!grid) return;

                // Get the upload button (last child)
                const uploadButton = grid.lastElementChild;

                // Count existing images
                const existingImages = grid.querySelectorAll('.image-item:not(:last-child)').length;

                // Calculate how many more we can add (max 5 total)
                const remainingSlots = 5 - existingImages;
                const filesToProcess = files.slice(0, remainingSlots);

                filesToProcess.forEach(file => {
                    if (!file.type.startsWith('image/')) return;

                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const newImageItem = document.createElement('div');
                        newImageItem.className = 'image-item';

                        const currentImagesCount = grid.querySelectorAll('.image-item:not(:last-child)').length;

                        newImageItem.innerHTML = `
                            <img src="${e.target.result}" alt="Additional Image">
                            <button type="button" class="remove-btn"><i class="bi bi-x"></i></button>
                            <div class="badge-overlay">x${currentImagesCount + 1}</div>
                        `;

                        newImageItem.querySelector('.remove-btn').addEventListener('click', () => {
                            newImageItem.remove();

                            // Update numbering of remaining images
                            updateBadgeNumbers(grid);
                        });

                        // Insert before the upload button
                        grid.insertBefore(newImageItem, uploadButton);
                    };
                    reader.readAsDataURL(file);
                });
            };

            // Helper function to update badge numbers
            const updateBadgeNumbers = (grid) => {
                const badges = grid.querySelectorAll('.badge-overlay');
                badges.forEach((badge, index) => {
                    if (badge.textContent.startsWith('x')) {
                        badge.textContent = `x${index + 1}`;
                    }
                });
            };

            // Setup modern image uploads
            setupModernImageUpload('editCoverImageUpload', 'editCoverImage', '#coverImageContainer', '#coverUploadContainer');
            setupModernImageUpload('editBackCoverImageUpload', 'editBackCoverImage', '#backCoverImageContainer', '#backCoverUploadContainer');
            setupModernImageUpload('editAdditionalImagesUpload', 'editAdditionalImages', '.additional-images .image-grid', true);
        });
    </script>
</body>

</html>